(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{64:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(4942),o=n(885),r=n(4651),s=n(7294),c=n(1138),a=n(151),u=n.n(a),l=n(5893),_=function(e){return(0,l.jsx)("div",{style:{position:"fixed",bottom:"10px"},children:(0,l.jsx)("input",{onChange:function(t){return e.onChange(t.target.value)},value:e.value,className:u().mini_textbox,type:"text",name:"q",placeholder:"Type what you think",autoComplete:"off",maxLength:60})})},x=n(7425),d=n.n(x),b=function(e){return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:15},children:[(0,l.jsxs)("div",{className:d().mini_arrow_box,style:{backgroundColor:e.color},children:[e.text,(0,l.jsx)("div",{className:d().mini_arrow_box_after,style:{borderTopColor:e.color}})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",width:20,marginTop:10,fontSize:18},children:[(0,l.jsx)("div",{children:e.avator}),(0,l.jsx)("div",{style:{fontSize:"10px"},children:e.name})]})]})},f=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],i=(0,s.useState)(""),o=i[0],r=i[1],a=(0,s.useState)(0),u=a[0],x=a[1],d=(0,c.useRealtimeUserAction)(),f=d.pushUserAction,h=d.userActionList;(0,s.useEffect)((function(){var e=setTimeout((function(){if(f){x(u+1),t!==o&&(console.log("API pushed"),f("text",t),r(t))}}),500);return function(){clearTimeout(e)}}),[u]);return(0,l.jsxs)("div",{style:{height:"90vh",padding:"0 0.5rem",overflowY:"scroll"},children:[h.map((function(e){return"text"!==e.actionId?(0,l.jsx)("div",{},e.key):e.value?(0,l.jsx)(b,{text:e.value,avator:e.avator,color:e.color,name:e.name},e.key):(0,l.jsx)("div",{},e.key)})),(0,l.jsx)(_,{onChange:function(e){n(e)},value:t})]})},h=n(4940),v=n.n(h),p=function(e){var t=e.text||"PUSH";return(0,l.jsx)("a",{onClick:function(t){t.preventDefault(),e.onClick()},href:"",className:"".concat(v().btn," ").concat(v()["btn--orange"]),children:t})},m=n(18),j=n.n(m),y=n(7723);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(){var e=(0,r.useRouter)().query,t=e.slideId,n=e.admin,i=(0,s.useState)(950),a=i[0],u=(i[1],(0,c.useRealtimeSharedState)({picNumber:1,enableCursor:!1,enableChat:!1,enableButtons:!1},"slideState")),_=(0,o.Z)(u,2),x=_[0],d=_[1],b=(0,c.useRealtimeSharedState)({nice:0,what:0},"clickState"),h=(0,o.Z)(b,2),v=h[0],m=h[1],g=(0,c.useRealtimeCursor)(),w=g.onMouseMove,k=g.renderCursors,D="/static/slides_pic/"+t+"/slide"+x.picNumber+".png";6==x.picNumber&&(D="/static/slides_pic/"+t+"/slide"+x.picNumber+".gif");var N="url("+D+")",A=a+"px",O=a/16*9+"px",S={width:A,height:O},E={width:A,height:O,backgroundSize:"".concat(A," ").concat(O)},P=(0,c.useRealtimeUserAction)((function(e,t){"button_1"===e?I(!0):"button_2"===e&&M(!0)})).pushUserAction,T=(0,s.useState)(!1),B=T[0],I=T[1],R=(0,s.useState)(!1),U=R[0],M=R[1],Z=function(e){P(e,"clicked"),"button_1"===e?(v.nice||(v.nice=0),v.nice+=1,m(v)):"button_2"===e&&(v.what||(v.what=0),v.what+=1,m(v))};return(0,l.jsxs)("div",{className:j().main,children:[n?(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{onClick:function(){x.picNumber=1,d(x)},children:"Back to beginning"}),(0,l.jsx)("button",{onClick:function(){x.picNumber-=1,d(x)},children:"Previous"}),(0,l.jsx)("button",{onClick:function(){x.picNumber+=1,d(x)},children:"Next"}),(0,l.jsxs)("button",{onClick:function(){x.enableCursor=!x.enableCursor,d(x)},children:[x.enableCursor?"Disable":"Enable"," Cursor"]}),(0,l.jsxs)("button",{onClick:function(){x.enableChat=!x.enableChat,d(x)},children:[x.enableChat?"Disable":"Enable"," Chat"]}),(0,l.jsxs)("button",{onClick:function(){x.enableButtons=!x.enableButtons,d(x)},children:[x.enableButtons?"Disable":"Enable"," Button"]}),(0,l.jsx)("button",{onClick:function(){v.nice=0,v.what=0,m(v)},children:"Reset count"})]}):(0,l.jsx)("div",{}),(0,l.jsx)("div",{className:j().center,children:(0,l.jsxs)("div",{className:j().paper,style:S,onMouseMove:w,children:[x.enableCursor?k():(0,l.jsx)("div",{}),(0,l.jsx)("div",{className:j().picture,style:C({backgroundImage:N},E)})]})}),(0,l.jsx)("div",{style:{position:"absolute",right:0,top:60,width:250},children:x.enableChat?(0,l.jsx)(f,{}):(0,l.jsx)("div",{})}),x.enableButtons?(0,l.jsxs)("div",{style:{position:"absolute",left:3,bottom:3},children:[(0,l.jsx)(y.Z,{in:!B,timeout:500,onExited:function(){return I(!1)},classNames:{enterActive:j().enterActive,enterDone:j().enterDone,exitActive:j().exitActive,exitDone:j().exitDone},children:(0,l.jsx)(p,{onClick:function(){return Z("button_1")},text:"LIKE "+v.nice})}),(0,l.jsx)("div",{style:{height:10}}),(0,l.jsx)(y.Z,{in:!U,timeout:500,onExited:function(){return M(!1)},classNames:{enterActive:j().enterActive,enterDone:j().enterDone,exitActive:j().exitActive,exitDone:j().exitDone},children:(0,l.jsx)(p,{onClick:function(){return Z("button_2")},text:"WHAT? "+v.what})})]}):(0,l.jsx)("div",{})]})}},3314:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/slide/[slideId]",function(){return n(64)}])},4940:function(e){e.exports={btn:"button_btn__35Aeg","btn--orange":"button_btn--orange__raTuT",enterActive:"button_enterActive__19yf3",enterDone:"button_enterDone__2Qmn2",exitActive:"button_exitActive__2UfUK",exitDone:"button_exitDone__2MC5v"}},7425:function(e){e.exports={arrow_box:"fukidashi_arrow_box__2QPd_",arrow_box_after:"fukidashi_arrow_box_after__2eIvx",mini_arrow_box:"fukidashi_mini_arrow_box__2N1_L",mini_arrow_box_after:"fukidashi_mini_arrow_box_after__umrha"}},151:function(e){e.exports={textbox:"textfield_textbox__8X6c2",mini_textbox:"textfield_mini_textbox__o8kRr"}},18:function(e){e.exports={main:"style_main__Z7V2t",center:"style_center__FaLOF",paper:"style_paper__rEsRm",picture:"style_picture__1mYHN",enterActive:"style_enterActive__2EBMy",enterDone:"style_enterDone__1B8C-",exitActive:"style_exitActive__3ddWn",exitDone:"style_exitDone___yFoH"}},8022:function(){}},function(e){e.O(0,[374,234,774,888,179],(function(){return t=3314,e(e.s=t);var t}));var t=e.O();_N_E=t}]);